(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{603:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("h2",{attrs:{id:"概述-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述-2"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),t("p",[s._v("这个学期学校开设了大数据的课程，教学使用的是 Apache 开源的 "),t("strong",[s._v("Hadoop")]),s._v(" 框架。")]),s._v(" "),t("p",[s._v("老师要求我们每个人将自己的安装以及配置的笔记记录下来，因为不少同学都没接触过 Linux 操作系统，所以安装和配置的过程遇到了很多问题。刚好我自己之前搭建了一个 Press，于是把自己的文章发布到 Press 上面，以供后来学习的时候参考。")]),s._v(" "),t("p",[s._v("因为老师提供的安装方式是使用虚拟机，虚拟机十分的消耗资源，而且启动速度很慢，尤其是在部署了多个节点之后。所以我并不打算使用虚拟机来部署 "),t("strong",[s._v("Hadoop")]),s._v("，而是使用 "),t("strong",[s._v("Docker")]),s._v(" 来部署，具体 "),t("strong",[s._v("Docker")]),s._v(" 是什么，我就不去介绍了，希望你看完百度或者一些所谓大神的分析后，不要把 "),t("strong",[s._v("Docker")]),s._v(" 当做虚拟机，"),t("strong",[s._v("Docker 是一项划时代的产物。")])]),s._v(" "),t("blockquote",[t("p",[s._v("Talk is cheap. Show me the code.")])]),s._v(" "),t("p",[s._v("话不多说，我们开始吧。")]),s._v(" "),t("h2",{attrs:{id:"什么是-hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是-hadoop"}},[s._v("#")]),s._v(" 什么是 Hadoop")]),s._v(" "),t("p",[s._v("因为学习的是 "),t("strong",[s._v("Hadoop")]),s._v("，所以按照文档惯例还是简单介绍一下 "),t("strong",[s._v("Hadoop")]),s._v("。")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("Apache Hadoop")]),s._v(" 是一款支持数据密集型"),t("a",{attrs:{href:"https://zh.wikipedia.org/w/index.php?title=%E5%88%86%E4%BD%88%E5%BC%8F&action=edit&redlink=1",target:"_blank",rel:"noopener noreferrer"}},[s._v("分布式"),t("OutboundLink")],1),s._v("应用程序并以Apache 2.0许可协议发布的"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E5%BC%80%E6%BA%90",target:"_blank",rel:"noopener noreferrer"}},[s._v("开源"),t("OutboundLink")],1),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E8%BB%9F%E9%AB%94%E6%A1%86%E6%9E%B6",target:"_blank",rel:"noopener noreferrer"}},[s._v("软件框架"),t("OutboundLink")],1),s._v("。")]),s._v(" "),t("p",[s._v("它支持在商品硬件构建的大型集群上运行的应用程序。")]),s._v(" "),t("p",[s._v("Hadoop是根据"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E8%B0%B7%E6%AD%8C%E5%85%AC%E5%8F%B8",target:"_blank",rel:"noopener noreferrer"}},[s._v("谷歌公司"),t("OutboundLink")],1),s._v("发表的"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/MapReduce",target:"_blank",rel:"noopener noreferrer"}},[s._v("MapReduce"),t("OutboundLink")],1),s._v("和"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Google%E6%AA%94%E6%A1%88%E7%B3%BB%E7%B5%B1",target:"_blank",rel:"noopener noreferrer"}},[s._v("Google文件系统"),t("OutboundLink")],1),s._v("的论文自行实现而成。")]),s._v(" "),t("p",[s._v("所有的Hadoop模块都有一个基本假设，即硬件故障是常见情况，应该由框架自动处理。")]),s._v(" "),t("p",[s._v("Hadoop框架透明地为应用提供可靠性和数据移动。它实现了名为MapReduce的"),t("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F",target:"_blank",rel:"noopener noreferrer"}},[s._v("编程范式"),t("OutboundLink")],1),s._v("：应用程序被分割成许多小部分，而每个部分都能在集群中的任意节点上运行或重新运行。")]),s._v(" "),t("p",[s._v("此外，Hadoop还提供了分布式文件系统，用以存储所有计算节点的数据，这为整个集群带来了非常高的带宽。")]),s._v(" "),t("p",[s._v("MapReduce和分布式文件系统的设计，使得整个框架能够自动处理节点故障。")]),s._v(" "),t("p",[s._v("它使应用程序与成千上万的独立计算的电脑和PB级的数据连接起来。")]),s._v(" "),t("p",[s._v("现在普遍认为整个Apache Hadoop“平台”包括Hadoop内核、MapReduce、Hadoop分布式文件系统（HDFS）以及一些相关项目，有Apache Hive和Apache HBase等等。")])]),s._v(" "),t("p",[s._v("以上内容摘自 Wikipedia。")]),s._v(" "),t("h2",{attrs:{id:"预备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#预备工作"}},[s._v("#")]),s._v(" 预备工作")]),s._v(" "),t("p",[s._v("因为 "),t("strong",[s._v("Hadoop")]),s._v(" 是在 Linux 容器中部署的，所以最好需要有一定的 Linux 知识，比如对 Linux 的一些基本指令有一些了解。如果真的一点 Linux 的了解都没有，可以尝试先学习一点点 Linux 的指令，这不管是对现在还是以后，都是会很有帮助的。")]),s._v(" "),t("h2",{attrs:{id:"约定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#约定"}},[s._v("#")]),s._v(" 约定")]),s._v(" "),t("p",[s._v("如果你是跟着这个文档一步步来部署 "),t("strong",[s._v("Hadoop")]),s._v(" 环境的，我们做出如下约定：")]),s._v(" "),t("ol",[t("li",[s._v("为了避免出错，请务必仔细查看文档，一步步执行，并且尽量选择复制指令而不是手动输入。")]),s._v(" "),t("li",[s._v("对于 Windows 用户和 macOS 用户，文档中所有指令前的 "),t("code",[s._v("#")]),s._v(" 和 "),t("code",[s._v("$")]),s._v(" 请直接忽略，请不要复制，直接从第一个英文字符开始复制。因为在 Windows 和 macOS 中使用 Docker 实际上相当于是运行在虚拟机中的，这个虚拟机只有一个 root 用户，所以在 Windows 和 macOS 中操作 Docker 的时候（使用 Docker 指令）是不需要使用 root 权限的。"),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[t("code",[s._v("#")]),s._v(" 和 "),t("code",[s._v("$")]),s._v(" 是针对 Linux 和 macOS 的权限提示符号。")])])]),s._v(" "),t("li",[s._v("对于 Linux 用户，如果指令前是 "),t("code",[s._v("#")]),s._v("，请以 root 权限执行该指令，如果是 "),t("code",[s._v("$")]),s._v("，那么直接执行即可。")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),t("p",[s._v("另外，再次提醒：")]),s._v(" "),t("p",[s._v("请尽量选择复制指令运行，而不是手动输入，复制指令并不会使得编程技术变差，手动输入指令也并不能使编程能力提升。")])]),s._v(" "),t("hr"),s._v(" "),t("hr"),s._v(" "),t("hr"),s._v(" "),t("h1",{attrs:{id:"安装-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker"}},[s._v("#")]),s._v(" 安装 Docker")]),s._v(" "),t("h2",{attrs:{id:"安装-docker-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-2"}},[s._v("#")]),s._v(" 安装 Docker")]),s._v(" "),t("p",[s._v("既然是使用 "),t("strong",[s._v("Docker")]),s._v(" 来部署 "),t("strong",[s._v("Hadoop")]),s._v("，那么安装 "),t("strong",[s._v("Docker")]),s._v(" 肯定是比不可少的。对于不同的操作系统，安装 "),t("strong",[s._v("Docker")]),s._v(" 的方式也是不同的。这个部分将会介绍各个操作系统下如何安装 "),t("strong",[s._v("Docker")]),s._v("。")]),s._v(" "),t("p",[s._v("开始安装之前，请根据你的操作系统来选择查看文档的不同部分：")]),s._v(" "),t("p",[s._v("Windows 用户："),t("a",{attrs:{href:"#windows-%E5%AE%89%E8%A3%85-docker"}},[s._v("Windows 安装 Docker")])]),s._v(" "),t("p",[s._v("macOS 用户："),t("a",{attrs:{href:"#macos-%E5%AE%89%E8%A3%85-docker"}},[s._v("macOS 安装 Docker")])]),s._v(" "),t("p",[s._v("Linux 用户："),t("a",{attrs:{href:"#linux-%E5%AE%89%E8%A3%85-docker"}},[s._v("Linux 安装 Docker")])]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("每个操作系统只需要看该操作系统的版本的部分，对于其他操作系统的部分直接略过即可。\n一般情况下，在 Docker 的安装步骤都是不会出现什么问题的，只有 Windows 的非专业版用户会稍微的麻烦一点点。")])]),s._v(" "),t("h2",{attrs:{id:"windows-安装-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows-安装-docker"}},[s._v("#")]),s._v(" Windows 安装 Docker")]),s._v(" "),t("p",[s._v("对于 Windows 操作系统，目前 "),t("strong",[s._v("Docker")]),s._v(" 只支持 Windows 10 专业版，而且版本号要在 15063 以上。")]),s._v(" "),t("p",[s._v("这对于大部分的 Windows 10 专业版用户来说都是可以达到的。但是还是有不少人使用的是 "),t("strong",[s._v("教育版")]),s._v(" 或者 "),t("strong",[s._v("家庭版")]),s._v("。")]),s._v(" "),t("p",[s._v("对于不确定自己版本的人，可以在控制面板里查看到系统的版本。或者可以在 "),t("em",[s._v("powershell")]),s._v(" 运行：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Get-WmiObject -Class Win32_OperatingSystem "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" % Caption\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("上面的命令只能在 "),t("em",[s._v("powershell")]),s._v(" 中运行，在 CMD 是无法运行的。打开 "),t("em",[s._v("powershell")]),s._v(" 的方法是按 "),t("strong",[s._v("Win+R")]),s._v(" 组合键打开运行窗口后输入 "),t("code",[s._v("powershell")]),s._v(" 后确定即可打开 "),t("em",[s._v("powershell")]),s._v(" 窗口，然后执行上述命令即可查看操作系统是什么版本。")])]),s._v(" "),t("p",[s._v("比如我安装的是家庭版，那么就会显示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/Nyt3Ce2D8QBwVo7.png",alt:"image-20200429175022648.png"}})]),s._v(" "),t("p",[s._v("这说明我安装的版本就是家庭版。")]),s._v(" "),t("p",[s._v("虽然 "),t("strong",[s._v("Docker")]),s._v(" 官方仅支持在 Windows 10 专业版上运行，由于 Windows 各个版本只是由于阉割了不同的组件而得到的。所以可以在其他版本上安装 "),t("strong",[s._v("Docker")]),s._v(" 运行所需要的组件，也是可以完成对 "),t("strong",[s._v("Docker")]),s._v(" 的安装的。")]),s._v(" "),t("h3",{attrs:{id:"非-windows-10-专业版"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#非-windows-10-专业版"}},[s._v("#")]),s._v(" 非 Windows 10 专业版")]),s._v(" "),t("p",[s._v("如果你的操作系统是 Windows 10 专业版，那么直接跳到 "),t("a",{attrs:{href:"#%E4%B8%8B%E8%BD%BD-docker-desktop"}},[s._v("下载 Docker Desktop")]),s._v(" 。")]),s._v(" "),t("p",[s._v("首先需要安装 Windows 10 中缺少的 "),t("strong",[s._v("Docker")]),s._v(" 运行环境。主要有两个： "),t("code",[s._v("HyperV")]),s._v(" 和 "),t("code",[s._v("Containers")]),s._v("。由于需要安装的东西比较多（每个都很小），所以我们写两个批处理文件来运行安装。使用记事本工具（如果你有其他的编辑器，当然也可以使用），创建两个文本文件，文件名分别是 "),t("code",[s._v("InstallHyperV.bat")]),s._v(" 和 "),t("code",[s._v("InstallContainers.bat")]),s._v("。")]),s._v(" "),t("p",[s._v("使用系统自带的记事本软件的话，默认创建的文件为 "),t("code",[s._v(".txt")]),s._v(" 格式，需要自行将后缀名改为 "),t("code",[s._v(".bat")]),s._v("。")]),s._v(" "),t("p",[s._v("要想更改文件后缀名，需要打开这一项：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/7fUT3gdSitQPlLr.png",alt:"image-20200429171905764.png"}})]),s._v(" "),t("p",[s._v("打开这一项后，才可以更改文件的后缀名。")]),s._v(" "),t("p",[s._v("如果使用的是其他的编辑器，比如 notepad++，那是可以直接重命名的，因为 notepad++ 默认创建的文本是没有后缀名的。")]),s._v(" "),t("p",[t("code",[s._v("InstallHyperV.bat")]),s._v(" 的内容是：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('pushd "%~dp0"\ndir /b %SystemRoot%\\servicing\\Packages\\*Hyper-V*.mum >hyper-v.txt\nfor /f %%i in (\'findstr /i . hyper-v.txt 2^>nul\') do dism /online /norestart /add-package:"%SystemRoot%\\servicing\\Packages\\%%i"\ndel hyper-v.txt\ndism /online /enable-feature /featurename:Microsoft-Hyper-V -All /LimitAccess /ALL\npause\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("code",[s._v("InstallContainers.bat")]),s._v(" 的内容是：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('pushd "%~dp0"\ndir /b %SystemRoot%\\servicing\\Packages\\*containers*.mum >containers.txt\nfor /f %%i in (\'findstr /i . containers.txt 2^>nul\') do dism /online /norestart /add-package:"%SystemRoot%\\servicing\\Packages\\%%i"\ndel containers.txt\ndism /online /enable-feature /featurename:Containers -All /LimitAccess /ALL\npause\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("文件创建完后，是这样的：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/lJQ9AZsaIyTGWO1.png",alt:"image-20200429172002061.png"}})]),s._v(" "),t("p",[s._v("这样就成功创建了两个安装需要的组件的批处理文件。")]),s._v(" "),t("p",[s._v("接下来分别使用 "),t("strong",[s._v("管理员权限")]),s._v(" 运行这两个批处理文件，右键点击选择管理员运行。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("执行过程可能较缓慢，如果进度条长时间卡住不动，可以关掉窗口重新运行，或者尝试更换网络，反正移动宽带经过我的测试是不太行。")])]),s._v(" "),t("p",[s._v("等待全部安装完毕后，重启电脑。")]),s._v(" "),t("p",[s._v("电脑重启后，进入桌面，使用 Win+R 组合键，调出运行窗口，输入 "),t("code",[s._v("regedit")]),s._v("，如下图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/QeOAWDoEzKhgqCn.png",alt:"image-20200429174415956.png"}})]),s._v(" "),t("p",[s._v("点击确定，会打开注册表编辑器。")]),s._v(" "),t("p",[s._v("找到 "),t("code",[s._v("计算机\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion")]),s._v(" 这一项，如图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/AWZuycFeoix3n4Y.png",alt:"image-20200429175139126.png"}})]),s._v(" "),t("p",[s._v("右键点击其中的 "),t("code",[s._v("EditionID")]),s._v("，选择修改，输入 "),t("code",[s._v("Professional")]),s._v("，如图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/Dgo6jc3eaQA17nM.png",alt:"image-20200429175257276.png"}})]),s._v(" "),t("p",[s._v("然后点击确定，可以看到此时 "),t("code",[s._v("EditionID")]),s._v(" 后面的数据以及变成 "),t("code",[s._v("Professional")]),s._v(" 了。")]),s._v(" "),t("p",[s._v("现在可以关闭注册表编辑器了。")]),s._v(" "),t("p",[s._v("到此，已经为非 Windows 10 专业版的操作系统安装了缺少的组件。")]),s._v(" "),t("p",[s._v("接下来就可以像 Windows 10 专业版一样安装 "),t("strong",[s._v("Docker")]),s._v(" 了。")]),s._v(" "),t("h3",{attrs:{id:"下载-docker-desktop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载-docker-desktop"}},[s._v("#")]),s._v(" 下载 Docker Desktop")]),s._v(" "),t("p",[s._v("使用浏览器打开："),t("a",{attrs:{href:"https://www.docker.com/get-started",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.docker.com/get-started"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("点击 "),t("strong",[s._v("Docker Desktop")]),s._v(" 卡片中的 "),t("strong",[s._v("Download for Windows")]),s._v("，就可以了。由于是从海外网站下载，所以速度可能不是很快，请耐心等待，或者可以联系我，我会发给你下载好的 Docker Desktop。当然要是你有方法加速访问海外网站，那就另当别论了。")]),s._v(" "),t("p",[s._v("下载完成后，在相应的下载路径会多出来一个这样的文件：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/Zl53pcmKig46Hxw.png",alt:"image-20200501225433618.png"}})]),s._v(" "),t("p",[s._v("这时，就可以进行下一步操作了。")]),s._v(" "),t("h3",{attrs:{id:"安装-docker-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-3"}},[s._v("#")]),s._v(" 安装 Docker")]),s._v(" "),t("p",[s._v("打开下载的 "),t("code",[s._v("Docker Desktop Installer")]),s._v(" 安装程序（双击即可打开），稍作等待后，如下图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/mkgQoV4ASZiW9x8.png",alt:"image-20200429175732639.png"}})]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("由于 Docker 版本的不同，可能这一步出现的选项也是不一样的。这个无需纠结，直接保持默认即可。")])]),s._v(" "),t("p",[s._v("直接保持默认即可，点击 "),t("code",[s._v("ok")]),s._v("，等待程序安装即可。")]),s._v(" "),t("p",[s._v("稍作等待后，安装完成会提示重新启动 Windows，点击 "),t("code",[s._v("Close and Restart")]),s._v(" 即可重新启动。")]),s._v(" "),t("p",[s._v("重新启动后，就完成了安装，这时 "),t("strong",[s._v("Docker Desktop")]),s._v(" 程序会随着系统自动启动。")]),s._v(" "),t("p",[s._v("到这里，"),t("strong",[s._v("Docker")]),s._v(" 的安装就已经结束了。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果不想 Docker 随着系统启动，而是只在需要使用的时候启动它，可以点击任务栏的 Docker 图标，选择 "),t("code",[s._v("Settings")]),s._v("，然后将 "),t("code",[s._v("General")]),s._v(" 中的 "),t("code",[s._v("Start Docker Desktop when you log in")]),s._v(" 前面的勾去除即可。")])]),s._v(" "),t("h3",{attrs:{id:"配置国内镜像源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置国内镜像源"}},[s._v("#")]),s._v(" 配置国内镜像源")]),s._v(" "),t("p",[t("strong",[s._v("Docker")]),s._v(" 安装之后，鉴于国内的网络环境，最好是配置一下国内的镜像源。")]),s._v(" "),t("p",[s._v("安装完成后，Windows 的任务栏就多了一个 "),t("strong",[s._v("Docker")]),s._v(" 的小鲸鱼图标，点击这个图标，选择 "),t("code",[s._v("Setting")]),s._v("，选择 "),t("code",[s._v("Docker Engine")]),s._v("，右边会出现一个编辑框。")]),s._v(" "),t("p",[s._v("在这里添加镜像站地址，比如要添加网易云的镜像，只要将 "),t("code",[s._v('"https://hub-mirror.c.163.com"')]),s._v(" 添加到 "),t("code",[s._v('"registry-mirrors":')]),s._v(" 中即可，完成后如图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/g2Cof1qtezOWMVd.png",alt:"image-20200429181155545.png"}})]),s._v(" "),t("p",[s._v("如果是添加其他的镜像站，注意要符合 Json 的语法格式，不然会导致 "),t("strong",[s._v("Docker")]),s._v(" 无法启动。")]),s._v(" "),t("p",[s._v("添加完成后点击 "),t("code",[s._v("Apply & Restart")]),s._v(" 即可保存并重启 Docker。")]),s._v(" "),t("p",[s._v("等待 Docker 重启完毕，打开 powershell，检查镜像站是否设置成功，使用如下指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("docker info\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果在最后看到：")]),s._v(" "),t("blockquote",[t("p",[s._v("Registry Mirrors:")]),s._v(" "),t("p",[s._v("https://hub-mirror.c.163.com/")])]),s._v(" "),t("p",[s._v("说明镜像源已经成功配置。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果你使用的是其他的镜像源，那么执行 "),t("code",[s._v("docker info")]),s._v(" 指令后显示的镜像源内容也是不一样的。")])]),s._v(" "),t("h2",{attrs:{id:"macos-安装-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#macos-安装-docker"}},[s._v("#")]),s._v(" macOS 安装 Docker")]),s._v(" "),t("p",[s._v("macOS 安装 "),t("strong",[s._v("Docker")]),s._v(" 比 Windows 平台要方便很多，也不需要做过多的配置。")]),s._v(" "),t("h3",{attrs:{id:"下载-docker-desktop-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载-docker-desktop-2"}},[s._v("#")]),s._v(" 下载 Docker Desktop")]),s._v(" "),t("p",[s._v("使用浏览器打开："),t("a",{attrs:{href:"https://www.docker.com/get-started",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.docker.com/get-started"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("点击 "),t("strong",[s._v("Docker Desktop")]),s._v(" 卡片中的 "),t("strong",[s._v("Download for Mac")]),s._v("，就可以了。由于是从海外网站下载，所以速度可能不是很快，请耐心等待，或者可以联系我，我会发给你下载好的 Docker Desktop。当然要是你有方法加速访问海外网站，那就另当别论了。")]),s._v(" "),t("p",[s._v("下载完成后，在你的下载路径会多出来一个这样的文件：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/JNuEmOhYdRM29kZ.png",alt:"image-20200501230228463.png"}})]),s._v(" "),t("p",[s._v("这时，就可以进行下一步操作了。")]),s._v(" "),t("h3",{attrs:{id:"安装-docker-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-4"}},[s._v("#")]),s._v(" 安装 Docker")]),s._v(" "),t("p",[s._v("只需要双击打开上一步中下载的 "),t("code",[s._v(".dmg")]),s._v(" 文件，即可打开 "),t("strong",[s._v("Docker")]),s._v(" 安装镜像。")]),s._v(" "),t("p",[s._v("等待打开文件后出现：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/2C3oxrOTdSRsenv.png",alt:"image-20200501230343408.png"}})]),s._v(" "),t("p",[s._v("直接将左边的 "),t("strong",[s._v("Docker")]),s._v(" 拖入右边的 "),t("strong",[s._v("Applications")]),s._v(" 文件夹，等待文件拷贝完成即可完成 macOS 下对 "),t("strong",[s._v("Docker")]),s._v(" 的安装。")]),s._v(" "),t("p",[s._v("安装完成后关闭这个窗口，推出 "),t("strong",[s._v("Docker")]),s._v(" 即可。")]),s._v(" "),t("h3",{attrs:{id:"运行-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行-docker"}},[s._v("#")]),s._v(" 运行 Docker")]),s._v(" "),t("p",[s._v("在 macOS 下安装 "),t("strong",[s._v("Docker")]),s._v(" 过后并不会直接运行软件，需要我们自己去 "),t("em",[s._v("启动台")]),s._v(" 打开 "),t("strong",[s._v("Docker")]),s._v(" 才会运行。")]),s._v(" "),t("p",[s._v("第一次打开 "),t("strong",[s._v("Docker")]),s._v(" 会比较缓慢，因为需要验证文件完整性等操作。")]),s._v(" "),t("p",[s._v("打开后，直接关闭 "),t("strong",[s._v("Docker")]),s._v(" 窗口即可。关闭窗口后 "),t("strong",[s._v("Docker")]),s._v(" 会在后台保持运行状态，并且会在顶部菜单栏显示 "),t("strong",[s._v("Docker")]),s._v(" 的鲸鱼图标。")]),s._v(" "),t("p",[s._v("到这里就完成了 "),t("strong",[s._v("Docker")]),s._v(" 的安装运行。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果不想 Docker 随着系统启动，而是只在需要使用的时候启动它，可以点击任务栏的 Docker 图标，选择 "),t("code",[s._v("Preferences")]),s._v("，然后将 "),t("code",[s._v("General")]),s._v(" 中的 "),t("code",[s._v("Start Docker Desktop when you log in")]),s._v(" 前面的勾去除即可。")])]),s._v(" "),t("h3",{attrs:{id:"配置国内镜像源-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置国内镜像源-2"}},[s._v("#")]),s._v(" 配置国内镜像源")]),s._v(" "),t("p",[t("strong",[s._v("Docker")]),s._v(" 安装之后，鉴于国内的网络环境，最好是配置一下国内的镜像源。")]),s._v(" "),t("p",[s._v("安装完成后，macOS 的任务栏就多了一个 "),t("strong",[s._v("Docker")]),s._v(" 的小鲸鱼图标，点击这个图标，选择 "),t("code",[s._v("Preferences")]),s._v("，选择 "),t("code",[s._v("Docker Engine")]),s._v("，右边会出现一个编辑框。")]),s._v(" "),t("p",[s._v("在这里添加镜像站地址，比如要添加网易云的镜像，只要将 "),t("code",[s._v('"https://hub-mirror.c.163.com"')]),s._v(" 添加到 "),t("code",[s._v('"registry-mirrors":')]),s._v(" 中即可，完成后如图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/19/e9Ir2jomN3lRY5c.png",alt:"image-20200501235011745.png"}})]),s._v(" "),t("p",[s._v("如果是添加其他的镜像站，注意要符合 Json 的语法格式，不然会导致 "),t("strong",[s._v("Docker")]),s._v(" 无法启动。")]),s._v(" "),t("p",[s._v("添加完成后点击 "),t("code",[s._v("Apply & Restart")]),s._v(" 即可保存并重启 Docker。")]),s._v(" "),t("p",[s._v("等待 Docker 重启完毕，我们打开终端程序，检查镜像站是否设置成功，使用如下指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ docker info\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果在最后看到：")]),s._v(" "),t("blockquote",[t("p",[s._v("Registry Mirrors:")]),s._v(" "),t("p",[s._v("https://hub-mirror.c.163.com/")])]),s._v(" "),t("p",[s._v("说明镜像源已经成功配置。")]),s._v(" "),t("h2",{attrs:{id:"linux-安装-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-安装-docker"}},[s._v("#")]),s._v(" Linux 安装 Docker")]),s._v(" "),t("p",[s._v("因为 "),t("strong",[s._v("Docker")]),s._v(" 是一款开源的软件，所以在绝大部分的 Linux 发行版中，都是可以通过包管理器来直接安装 "),t("strong",[s._v("Docker")]),s._v(" 的，区别只是在于不同的包管理器要使用不同的命令，其实都是大同小异的。")]),s._v(" "),t("p",[s._v("因为官方给了极为详细的 "),t("strong",[s._v("Docker")]),s._v(" 安装指南，所以就不做复制粘贴的工作了，下面只搬运官方给出的几种发行版的安装方式的地址。当然这里的链接都是 "),t("strong",[s._v("Docker CE")]),s._v(" 的安装指南，如果需要 "),t("strong",[s._v("Docker EE")]),s._v(" 的安装指南，请自行在 "),t("strong",[s._v("Docker")]),s._v(" 官网查找。")]),s._v(" "),t("p",[s._v("Linux 可能遇到的问题比较多，如果安装过程中遇到了问题，请自行搜索解决。一般情况下，按照官方的指南进行操作，是不会出现问题的。")]),s._v(" "),t("h3",{attrs:{id:"fedora"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fedora"}},[s._v("#")]),s._v(" Fedora")]),s._v(" "),t("p",[s._v("官方安装指南地址为："),t("a",{attrs:{href:"https://docs.docker.com/engine/install/fedora/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/engine/install/fedora/"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"centos"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[s._v("#")]),s._v(" CentOS")]),s._v(" "),t("p",[s._v("官方安装指南地址为："),t("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/engine/install/centos/"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"ubuntu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu"}},[s._v("#")]),s._v(" Ubuntu")]),s._v(" "),t("p",[s._v("官方安装指南地址为："),t("a",{attrs:{href:"https://docs.docker.com/engine/install/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/engine/install/ubuntu/"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"debian"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debian"}},[s._v("#")]),s._v(" Debian")]),s._v(" "),t("p",[s._v("官方安装指南地址为："),t("a",{attrs:{href:"https://docs.docker.com/engine/install/debian/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/engine/install/debian/"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"linux-配置国内镜像源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#linux-配置国内镜像源"}},[s._v("#")]),s._v(" Linux 配置国内镜像源")]),s._v(" "),t("p",[s._v("大多数 Linux 使用 "),t("code",[s._v("systemd")]),s._v(" 来管理进程，对于使用 "),t("code",[s._v("systemd")]),s._v(" 的系统，在 "),t("code",[s._v("/etc/docker/daemon.json")]),s._v(" 中写入如下内容（如果文件不存在请新建该文件）：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://hub-mirror.c.163.com"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("如果是添加其他的镜像站，注意要符合 Json 的语法格式，不然会导致 "),t("strong",[s._v("Docker")]),s._v(" 无法启动。")]),s._v(" "),t("p",[s._v("添加完成后，重载 "),t("code",[s._v("daemon")]),s._v(" 并重启 "),t("strong",[s._v("Docker")]),s._v(" 服务：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("等待 Docker 重启完毕，我们打开终端程序，检查镜像站是否设置成功，使用如下指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker info")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果在最后看到：")]),s._v(" "),t("blockquote",[t("p",[s._v("Registry Mirrors:")]),s._v(" "),t("p",[s._v("https://hub-mirror.c.163.com/")])]),s._v(" "),t("p",[s._v("说明镜像源已经成功配置，接下来就可以开始安装 Hadoop 了。")]),s._v(" "),t("hr"),s._v(" "),t("hr"),s._v(" "),t("hr"),s._v(" "),t("h1",{attrs:{id:"安装-hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-hadoop"}},[s._v("#")]),s._v(" 安装 Hadoop")]),s._v(" "),t("p",[s._v("现在，所有的前置工作都已经完成了，可以开始进行对 Hadoop 的安装了。")]),s._v(" "),t("h2",{attrs:{id:"安装-hadoop-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-hadoop-2"}},[s._v("#")]),s._v(" 安装 Hadoop")]),s._v(" "),t("p",[s._v("这一小节，使用 Ubuntu 18.04 镜像安装 "),t("strong",[s._v("Hadoop")]),s._v("，当然，你也可以使用其他版本的镜像，并且部署三个 "),t("strong",[s._v("Hadoop")]),s._v(" 节点。至于节点数量可以按照你的电脑配置酌情增删。")]),s._v(" "),t("h2",{attrs:{id:"创建虚拟网络"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建虚拟网络"}},[s._v("#")]),s._v(" 创建虚拟网络")]),s._v(" "),t("p",[s._v("首先创建一个虚拟网络，后面将要创建的三个节点全部会被连接至这个网络。")]),s._v(" "),t("p",[s._v("为了方便区分不同网络的作用，将这个网络命名为 "),t("code",[s._v("hadoop-net")]),s._v("。")]),s._v(" "),t("p",[s._v("使用指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker network create -d bridge hadoop-net")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可创建网络 "),t("code",[s._v("hadoop-net")]),s._v("。")]),s._v(" "),t("p",[s._v("创建网络后，查看结果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/qMf5DK8BekCygSX.png",alt:"iShot2020-05-20下午07.53.21.png"}})]),s._v(" "),t("p",[s._v("可以看到已经成功创建了 "),t("code",[s._v("hadoop-net")]),s._v(" 网络。")]),s._v(" "),t("h2",{attrs:{id:"拉取-ubuntu-18-04-镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拉取-ubuntu-18-04-镜像"}},[s._v("#")]),s._v(" 拉取 Ubuntu 18.04 镜像")]),s._v(" "),t("p",[s._v("如果之前已经拉取了 Ubuntu 18.04 镜像，那么可以直接忽略这一步，没有拉取镜像的，可以使用：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull ubuntu:18.04")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("拉取镜像，镜像拉取完毕后，查看本地镜像，结果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/gTx78RvkCueN3MJ.png",alt:"iShot2020-05-20下午07.54.59.png"}})]),s._v(" "),t("h2",{attrs:{id:"模板容器基本配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模板容器基本配置"}},[s._v("#")]),s._v(" 模板容器基本配置")]),s._v(" "),t("p",[s._v("因为要部署三个节点，而这三个节点都是要安装 "),t("strong",[s._v("Hadoop")]),s._v(" 的，如果创建三个容器，然后一个个的安装 "),t("strong",[s._v("Hadoop")]),s._v("，效率是很低的，也是不必要的。")]),s._v(" "),t("p",[s._v("这里，先创建一个模板镜像。然后直接利用这个镜像来创建三个容器（每个容器都运行着一个节点），这样可以提高部署的效率。之后，还可以把这个镜像提交到 "),t("strong",[s._v("Docker Hub")]),s._v("，这样一来以后再次部署 "),t("strong",[s._v("Docker")]),s._v(" 分布式环境时就会变得很轻松了。")]),s._v(" "),t("h3",{attrs:{id:"创建模板容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建模板容器"}},[s._v("#")]),s._v(" 创建模板容器")]),s._v(" "),t("p",[s._v("首先，根据 Ubuntu 18.04 的镜像创建一个模板容器，先在这个容器内安装好 "),t("strong",[s._v("Hadoop")]),s._v(" 环境。")]),s._v(" "),t("p",[s._v("使用以下指令创建一个名为 "),t("code",[s._v("hadoop-template")]),s._v(" 的容器：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -t -i --name "hadoop-template" ubuntu:18.04')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这时，本机终端会进入容器的 Shell：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/tZxnglYoBLE9dR5.png",alt:"iShot2020-05-20下午07.57.14.png"}})]),s._v(" "),t("p",[s._v("接下来，就可以开始操作这个容器了。")]),s._v(" "),t("h3",{attrs:{id:"配置国内镜像源-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置国内镜像源-3"}},[s._v("#")]),s._v(" 配置国内镜像源")]),s._v(" "),t("p",[s._v("由于国内的网络环境，Ubuntu 的海外主站的访问速度是非常感人的，所以最好配置一下国内的镜像站。")]),s._v(" "),t("p",[s._v("因为此时的 Ubuntu 是一个非常精简的镜像，甚至连 Vim 都没有安装，所以无法编辑镜像站的配置文件，只能删除它，然后使用 "),t("code",[s._v("echo")]),s._v(" 指令写入新的配置文件。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("如果你使用的是其他版本的 Ubuntu，请自行搜索该版本的镜像源配置。")])]),s._v(" "),t("p",[s._v("对于 Ubuntu 18.04 的具体操作如下：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("删除已有的配置文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm /etc/apt/sources.list")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这时，默认的镜像配置文件就被删除了，接下来写入阿里云的镜像站的配置到这个文件。")])]),s._v(" "),t("li",[t("p",[s._v("写入阿里云镜像站文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# echo "deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse')]),s._v('\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse\n\ndeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse\ndeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse" '),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /etc/apt/sources.list\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("这样就成功的把阿里云的镜像地址写入了配置文件。")])]),s._v(" "),t("li",[t("p",[s._v("更新镜像源：")]),s._v(" "),t("p",[s._v("接下来执行一下 "),t("code",[s._v("apt update")]),s._v(" 来升级一下镜像源，即可完成对镜像源的修改。")])])]),s._v(" "),t("h3",{attrs:{id:"安装需要使用的工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装需要使用的工具"}},[s._v("#")]),s._v(" 安装需要使用的工具")]),s._v(" "),t("p",[s._v("由于精简版的 Ubuntu 并没有内置编辑器工具，所以需要安装一个编辑器工具，这里我使用 Nano，因为 Vim 实在是用不习惯。")]),s._v(" "),t("p",[s._v("当然，你可以替换成你喜欢的 Linux 编辑工具，如果你和我一样，直接使用命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install nano")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("稍等即可安装完成。")]),s._v(" "),t("p",[s._v("然后安装一下网络工具，它可以自动为做很多网络配置，这里使用的是 "),t("code",[s._v("net-tools")]),s._v("，当然你也可以使用其他的工具，如果和我一样，直接使用命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install net-tools")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可完成安装。")]),s._v(" "),t("p",[s._v("暂时，只需要使用到这两个工具，其他的工具需要的时候可以自行安装。")]),s._v(" "),t("h3",{attrs:{id:"安装并配置-ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装并配置-ssh"}},[s._v("#")]),s._v(" 安装并配置 SSH")]),s._v(" "),t("p",[t("strong",[s._v("Hadoop")]),s._v(" 集群之间的节点是通过 SSH 来进行连接的，所以必须要安装一下 SSH 工具。")]),s._v(" "),t("p",[s._v("安装 SSH 工具只要使用命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install -y openssh-server")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可完成安装。这时，就可以使用 SSH 了。")]),s._v(" "),t("p",[s._v("因为后面的三个作为节点的容器都是使用现在配置的这个容器的镜像克隆出来的，所以配置一下 SSH 免密登录，只需要配置这一个自身是免密登录就可以了。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果不配置免密登录，后面使用 "),t("strong",[s._v("Hadoop")]),s._v(" 的时候将会频繁要求输入登录密码。")])]),s._v(" "),t("p",[s._v("先使用：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd ~")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("进入 root 目录。")]),s._v(" "),t("p",[s._v("然后执行下面指令生成秘钥：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# ssh-keygen -t rsa -P "" -f ~/.ssh/id_rsa')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果配置成功的话，终端会显示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/oUm6gPBCRAqYZjH.png",alt:"iShot2020-05-20下午08.04.48.png"}})]),s._v(" "),t("p",[s._v("接下来，将公钥将追加到 "),t("code",[s._v("authorized_keys")]),s._v(" 文件中。")]),s._v(" "),t("p",[s._v("使用命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat .ssh/id_rsa.pub >> .ssh/authorized_keys")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可完成。")]),s._v(" "),t("p",[s._v("接下来，设置一下 SSH 自动启动，让 SSH 跟随容器一起启动。")]),s._v(" "),t("p",[s._v("这里需要使用之前安装的 nano 编辑器来编辑 "),t("code",[s._v("~/.bashrc")]),s._v(" 文件，如果你安装的是其他的编辑器，请使用你的编辑器，如果你和我一样使用的是 nano，使用指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano ~/.bashrc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这会打开这个文件，在最后添加一行，内容是："),t("code",[s._v("service ssh start")]),s._v("，然后保存退出（Ctrl+O 后回车会保存，Ctrl + X 退出）。")]),s._v(" "),t("p",[s._v("添加完成后，文件结尾部分如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/AxRX7NEoBfZ1aFJ.png",alt:"iShot2020-05-20下午08.08.18.png"}})]),s._v(" "),t("p",[s._v("保存退出后，执行 "),t("code",[s._v("source")]),s._v(" 指令让系统重新读取环境变量：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source ~/.bashrc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("系统重新读取环境变量后会自动运行 SSH 服务，Shell 会有如下提示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/LUWmkKVQTwo3XgJ.png",alt:"iShot2020-05-20下午08.09.48.png"}})]),s._v(" "),t("p",[s._v("这时，可以执行 "),t("code",[s._v("ssh")]),s._v(" 命令查看是否可以连接上本地 host：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh 127.0.0.1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果出现 "),t("code",[s._v("Are you sure you want to continue connecting (yes/no)?")]),s._v("，输入 "),t("code",[s._v("yes")]),s._v(" 后回车即可。")])]),s._v(" "),t("p",[s._v("成功连接会有如下结果：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/UukeY3jmWOwN8iK.png",alt:"iShot2020-05-20下午08.12.30.png"}})]),s._v(" "),t("p",[s._v("如果出现了这样的结果，就说明已经可以成功使用了 SSH 服务了。")]),s._v(" "),t("h3",{attrs:{id:"安装-openjdk-1-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-openjdk-1-8"}},[s._v("#")]),s._v(" 安装 OpenJDK 1.8")]),s._v(" "),t("p",[s._v("因为 "),t("strong",[s._v("Hadoop")]),s._v(" 是使用 Java 开发的，并且编写的程序也是需要 JDK 运行的，所以必须要安装 JDK 环境，这里我选择 OpenJDK 1.8，当然，你可以选择其他的满足要求的 JDK 版本。")]),s._v(" "),t("p",[s._v("对于 OpenJDK 1.8 的安装，只需要使用命令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# apt install -y openjdk-8-jdk")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("稍等片刻，OpenJDK 1.8 就会安装完毕。")]),s._v(" "),t("p",[s._v("等待安装完毕后，执行 "),t("code",[s._v("java -version")]),s._v(" 来检查一下 JDK 版本，我的终端得到如下结果：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/uQ2PZCaWdGOoNrp.png",alt:"iShot2020-05-20下午08.15.55.png"}})]),s._v(" "),t("p",[s._v("这说明 JDK 已经完成安装。")]),s._v(" "),t("p",[s._v("为了让 JDK 环境被 "),t("strong",[s._v("Hadoop")]),s._v(" 读取到，所以配置一下 JAVA_HOME 全局环境变量。")]),s._v(" "),t("p",[s._v("编辑 "),t("code",[s._v("/etc/profile")]),s._v(" 文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /etc/profile")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在文件最后添加：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# Java\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\nexport JRE_HOME=${JAVA_HOME}/jre\nexport CLASSPATH=.:${JAVA_HOME}/lib/dt.jar:${JAVA_HOME}/lib/tools.jar:${JRE_HOME}/lib/rt.jar\nexport PATH=${JAVA_HOME}/bin:$PATH\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("文件最后如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/a3ZK7gysXG6LUwf.png",alt:"iShot2020-05-20下午08.28.36.png"}})]),s._v(" "),t("p",[s._v("添加完成后保存退出。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果你选择的是其他版本的 JDK，环境变量参数请更改。")])]),s._v(" "),t("h2",{attrs:{id:"模板容器安装-hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模板容器安装-hadoop"}},[s._v("#")]),s._v(" 模板容器安装 Hadoop")]),s._v(" "),t("p",[s._v("经过上面的操作，已经将 "),t("strong",[s._v("Hadoop")]),s._v(" 需要的环境和需要使用的工具安装完毕了。接下来就可以开始进行 "),t("strong",[s._v("Hadoop")]),s._v(" 的安装了。")]),s._v(" "),t("p",[s._v("开始吧。")]),s._v(" "),t("h3",{attrs:{id:"下载-hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载-hadoop"}},[s._v("#")]),s._v(" 下载 Hadoop")]),s._v(" "),t("p",[s._v("由于从 Apache 官方的仓库下载速度是十分缓慢的吗，所以这里从华中科技大学的镜像站下载 "),t("strong",[s._v("Hadoop 3.2.1")]),s._v(" 版本，使用 "),t("code",[s._v("wget")]),s._v(" 指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# wget http://mirrors.hust.edu.cn/apache/hadoop/common/hadoop-3.2.1/hadoop-3.2.1.tar.gz")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("因为华中科技大学的镜像比清华的镜像好用，所以我们使用华中科技大学的镜像，稍等片刻，即可完成下载。")]),s._v(" "),t("p",[s._v("下载完成后，终端显示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/IArlm41Y7canPGg.png",alt:"iShot2020-05-20下午08.18.45.png"}})]),s._v(" "),t("h3",{attrs:{id:"解压-hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压-hadoop"}},[s._v("#")]),s._v(" 解压 Hadoop")]),s._v(" "),t("p",[s._v("下载完成后，把下载的文件解压到 "),t("code",[s._v("/usr/local")]),s._v("，当然，你也可以选择解压到其他的路径，只是后面的配置会稍微有些不同。")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("tar")]),s._v(" 命令解压，解压过程可能有点慢，稍等即可：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar -zxvf hadoop-3.2.1.tar.gz -C /usr/local/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("解压后可以将源文件删除，使用：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm hadoop-3.2.1.tar.gz")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可删除这个源文件，节省磁盘空间。")]),s._v(" "),t("p",[s._v("然后进入 "),t("code",[s._v("/usr/local")]),s._v(" 文件夹：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /usr/local/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("列出当前文件夹下的文件（使用 "),t("code",[s._v("ls")]),s._v(" 或者 "),t("code",[s._v("ll")]),s._v(" 指令）：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/kadS9IiAxh4jEZw.png",alt:"iShot2020-05-20下午08.21.55.png"}})]),s._v(" "),t("p",[s._v("可以看到存在一个名为 "),t("code",[s._v("hadoop-3.2.1")]),s._v(" 的文件夹。")]),s._v(" "),t("h3",{attrs:{id:"添加环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加环境变量"}},[s._v("#")]),s._v(" 添加环境变量")]),s._v(" "),t("p",[s._v("接下来，为 "),t("strong",[s._v("Hadoop")]),s._v(" 添加全局环境变量，以使 "),t("strong",[s._v("Hadoop")]),s._v(" 在整个系统中可以被读取到。")]),s._v(" "),t("p",[s._v("使用 Nano 编辑器打开 "),t("code",[s._v("/etc/profile")]),s._v(" 文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /etc/profile")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后在文件最后添加如下文件：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# Hadoop\nexport HADOOP_HOME=/usr/local/hadoop-3.2.1\nexport HADOOP_CONF_DIR=${HADOOP_HOME}/etc/hadoop\nexport PATH=${HADOOP_HOME}/bin:${HADOOP_HOME}/sbin:$PATH\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("修改完成后，文件结尾应该是这样：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/AoRIDsMryYQ6jCt.png",alt:"iShot2020-05-20下午08.31.04.png"}})]),s._v(" "),t("p",[s._v("为了让容器每次启动时，这个配置文件都会生效，在 "),t("code",[s._v("~/.bashrc")]),s._v(" 文件中添加：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("source /etc/profile\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/I9CJSfchDA8vX62.png",alt:"iShot2020-05-20下午08.26.21.png"}})]),s._v(" "),t("p",[s._v("添加完成后保存关闭 Nano 编辑器并执行：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source ~/.bashrc")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可重新读取全局环境变量，并且在以后每次连接至容器的时候都会读取。")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("hadoop version")]),s._v(" 指令可以看到：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/dEPUnxrIf4avG39.png",alt:"iShot2020-05-20下午08.32.05.png"}})]),s._v(" "),t("p",[s._v("说明环境变量已经生效。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("至于 "),t("code",[s._v("JAVA_HOME")]),s._v(" 的路径是怎么得到的，可以执行指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("$ update-alternatives --config java\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可得到结果。")])]),s._v(" "),t("h3",{attrs:{id:"配置-hadoop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-hadoop"}},[s._v("#")]),s._v(" 配置 Hadoop")]),s._v(" "),t("p",[s._v("由于 "),t("strong",[s._v("Hadoop")]),s._v(" 不会自动读取 Java 的环境变量，所以需要手动单独为 "),t("strong",[s._v("Hadoop")]),s._v(" 指定 Java 的路径。")]),s._v(" "),t("p",[s._v("使用 nano 打开 "),t("code",[s._v("/usr/local/hadoop-3.2.1/etc/hadoop/hadoop-env.sh")]),s._v(" 文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/etc/hadoop/hadoop-env.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("我们在最后添加如下内容：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("同时，这个文件作为 "),t("strong",[s._v("Hadoop")]),s._v(" 环境的配置文件，还需要添加 HDFS 和 YARN 的用户，所以继续在后面添加：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export HDFS_NAMENODE_USER=root\nexport HDFS_DATANODE_USER=root\nexport HDFS_SECONDARYNAMENODE_USER=root\nexport YARN_RESOURCEMANAGER_USER=root\nexport YARN_NODEMANAGER_USER=root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("添加完成后，文件末尾如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/Y6BU3WnTkri9vzg.png",alt:"iShot2020-05-20下午08.35.56.png"}})]),s._v(" "),t("p",[s._v("保存并退出。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("至于为什么要添加这个变量，可以看到，这个配置文件中的这样一段话：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/qJjR9XhWvDdP4V3.png",alt:"iShot2020-05-20下午08.37.48.png"}})]),s._v(" "),t("p",[s._v("这里写明了，只需要添加 JAVA_HOME 即可。其他的配置添加在全局环境变量中。")]),s._v(" "),t("p",[s._v("也就是说，上面的用户可以添加到系统的环境变量中，但是一定是要添加的，不然运行起来会提示缺少用户的 ERROR。")])]),s._v(" "),t("h3",{attrs:{id:"修改-workers-文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-workers-文件"}},[s._v("#")]),s._v(" 修改 workers 文件")]),s._v(" "),t("p",[s._v("因为使用三个节点来部署 "),t("strong",[s._v("Hadoop")]),s._v("，所以需要把这三个工作节点添加至 "),t("code",[s._v("workers")]),s._v(" 文件，以在 "),t("strong",[s._v("Hadoop")]),s._v(" 启动的时候可以自动启动所有的 datanode。")]),s._v(" "),t("p",[s._v("使用指令打开 "),t("code",[s._v("workers")]),s._v(" 文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/etc/hadoop/workers")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("删除其中的 "),t("code",[s._v("localhost")]),s._v("，添加如下内容：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("namenode\ndatanode1\ndatanode2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("添加完成后保存并退出 Nano 编辑器。")]),s._v(" "),t("p",[s._v("这样一个三个节点，全部添加到了 "),t("code",[s._v("workers")]),s._v(" 中，添加完成该文件内容是这样的：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/Hlr6EWkeA5gYoav.png",alt:"iShot2020-05-20下午08.42.02.png"}})]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果你使用的不是三个节点的集群，这个文件请自行更改。")]),s._v(" "),t("p",[s._v("并且这里的节点 hostname 也可以根据自己的喜好更改。")])]),s._v(" "),t("h3",{attrs:{id:"修改-hadoop-环境配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-hadoop-环境配置文件"}},[s._v("#")]),s._v(" 修改 Hadoop 环境配置文件")]),s._v(" "),t("p",[s._v("在 "),t("strong",[s._v("Hadoop")]),s._v(" 中，一共有五个核心配置文件，官网给出了它们的默认配置，这里根据自己的需求进行一些改动即可。")]),s._v(" "),t("p",[s._v("官方关于这五个文件的介绍在文档里，地址是："),t("a",{attrs:{href:"https://hadoop.apache.org/docs/current/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hadoop.apache.org/docs/current/"),t("OutboundLink")],1),s._v("，在这个网站中将页面滚动到最下面，即可在左侧边栏的 "),t("code",[s._v("Configuration")]),s._v(" 中看到这五个配置的链接。如图：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/TOtUFPmJZvwHg3u.png",alt:"iShot2020-05-20下午08.44.06.png"}})]),s._v(" "),t("p",[s._v("接下来，依次修改需要的配置。")]),s._v(" "),t("ol",[t("li",[t("p",[t("code",[s._v("core-site.xml")])]),s._v(" "),t("p",[s._v("使用 Nano 编辑器打开这个文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/etc/hadoop/core-site.xml")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加如下内容：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<configuration>\n    <property>\n        <name>fs.defaultFS</name>\n        <value>hdfs://namenode:9000</value>\n        <final>true</final>\n    </property>\n    <property>\n        <name>hadoop.tmp.dir</name>\n        <value>/root/hadoop/tmp</value>\n    </property>\n</configuration>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("修改完成后保存退出，修改后该文件最后部分如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/jvQBuCsgR9zaxor.png",alt:"iShot2020-05-20下午08.48.32.png"}})]),s._v(" "),t("p",[s._v("这样就指定了默认的文件系统名为该 Url，并且设置了缓存文件夹。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("默认的缓存文件夹会存在问题，每次启动 "),t("strong",[s._v("Hadoop")]),s._v(" 都会重建。")]),s._v(" "),t("p",[s._v("所以指定为自己的文件夹。")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("hdfs-site.xml")])]),s._v(" "),t("p",[s._v("使用 Nano 编辑器打开这个文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/etc/hadoop/hdfs-site.xml")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加如下内容：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<configuration>\n    <property>\n        <name>dfs.namenode.name.dir</name>\n        <value>/root/hadoop/dfs/name</value>\n        <final>true</final>\n    </property>\n    <property>\n        <name>dfs.datanode.data.dir</name>\n        <value>/root/hadoop/dfs/data</value>\n        <final>true</final>\n    </property>\n    <property>\n        <name>dfs.replication</name>\n        <value>3</value>\n    </property>\n    <property>\n        <name>dfs.namenode.http-address</name>\n        <value>namenode:9870</value>\n    </property>\n    <property>\n        <name>dfs.permissions</name>\n        <value>false</value>\n    </property>\n    <property>\n        <name>dfs.webhdfs.enabled</name>\n        <value>true</value>\n    </property>\n</configuration>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br")])]),t("p",[s._v("修改完成后保存退出，修改后该文件最后部分如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/edrsWnvoKpIT3Zw.png",alt:"iShot2020-05-20下午08.51.13.png"}})]),s._v(" "),t("p",[s._v("其中，"),t("code",[s._v("dfs.replication")]),s._v(" 指定了备份数为 3，"),t("code",[s._v("dfs.namenode.name.dir")]),s._v(" 指定了 namenode 将元数据信息储存的位置，"),t("code",[s._v("dfs.datanode.data.dir")]),s._v(" 指定了 datanode 将数据块储存的位置，"),t("code",[s._v("dfs.namenode.http-address")]),s._v(" 指定了 namenode 的 HTTP 服务的地址，这个值是默认的，当然可以修改成自己想要的，剩下两个配置项则是修改了 HDFS 的权限和打开浏览器查看 HDFS。")]),s._v(" "),t("p",[s._v("修改完成后，保存退出。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("如果需要自行定义 "),t("code",[s._v("dfs.namenode.http-address")]),s._v(" 属性的时候，需要自行更改 hostname 和 port。")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("mapred-site.xml")])]),s._v(" "),t("p",[s._v("使用 Nano 编辑器打开这个文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/etc/hadoop/mapred-site.xml")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加如下内容：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<configuration>\n    <property>\n        <name>mapreduce.framework.name</name>\n        <value>yarn</value>\n    </property>\n    <property>\n        <name>mapreduce.application.classpath</name>\n        <value>\n            /usr/local/hadoop-3.2.1/share/hadoop/mapreduce/*,\n            /usr/local/hadoop-3.2.1/share/hadoop/mapreduce/lib/*,\n        </value>\n    </property>\n    <property>\n        <name>mapreduce.jobhistory.address</name>\n        <value>namenode:10020</value>\n    </property>\n    <property>\n        <name>mapreduce.jobhistory.webapp.address</name>\n        <value>namenode:19888</value>\n    </property>\n</configuration>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("修改完成后保存退出，修改后该文件最后部分如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/xP47DRr31aSUkF8.png",alt:"iShot2020-05-20下午08.53.42.png"}})]),s._v(" "),t("p",[t("code",[s._v("mapreduce.framework.name")]),s._v(" 指定了用于执行 MapReduce 作业的运行时框架为 "),t("code",[s._v("yarn")]),s._v("，"),t("code",[s._v("mapreduce.application.classpath")]),s._v(" 指定了 MapReduce 应用程序的类路径，后面两个配置打开了任务提交历史功能。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("yarn-site.xml")])]),s._v(" "),t("p",[s._v("使用 Nano 编辑器打开这个文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/etc/hadoop/yarn-site.xml")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加如下内容：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<configuration>\n    <property>\n        <name>yarn.resourcemanager.hostname</name>\n        <value>namenode</value>\n    </property>\n    <property>\n        <name>yarn.nodemanager.aux-services</name>\n        <value>mapreduce_shuffle</value>\n    </property>\n    <property>\n        <name>yarn.nodemanager.vmem-check-enabled</name>\n     <value>false</value>\n    </property>\n </configuration>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("修改完成后保存退出，修改后该文件最后部分如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/j7igu9LZPbHzheD.png",alt:"iShot2020-05-20下午08.55.24.png"}})]),s._v(" "),t("p",[t("code",[s._v("yarn.resourcemanager.hostname")]),s._v(" 指定了 ResourceManager 的主机名，"),t("code",[s._v("yarn.nodemanager.aux-services")]),s._v(" 指定了服务列表，"),t("code",[s._v("yarn.nodemanager.vmem-check-enabled")]),s._v(" 设置不检查虚拟内存。")])])]),s._v(" "),t("p",[s._v("还有一些其他的配置，暂时不会涉及到，这里也就不多介绍。")]),s._v(" "),t("h3",{attrs:{id:"修改启动脚本配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改启动脚本配置"}},[s._v("#")]),s._v(" 修改启动脚本配置")]),s._v(" "),t("p",[s._v("首先，修改 "),t("code",[s._v("start-dfs.sh")]),s._v(" 和 "),t("code",[s._v("stop-dfs.sh")]),s._v(" 的配置，在其中加入 HDFS 的用户。")]),s._v(" "),t("p",[s._v("分别使用 Nano 打开这两个文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/sbin/start-dfs.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("HDFS_NAMENODE_USER=root\nHDFS_DATANODE_USER=root\nHDFS_SECONDARYNAMENODE_USER=root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("保存退出，然后同样的打开 "),t("code",[s._v("stop-dfs.sh")]),s._v(" 文件：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/sbin/stop-dfs.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加同样的内容。添加完成后，这两个文件分别为是这样的。")]),s._v(" "),t("p",[t("code",[s._v("start-dfs.sh")]),s._v("：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/7e8D2Q9qoCwKXHY.png",alt:"iShot2020-05-20下午08.56.55.png"}})]),s._v(" "),t("p",[t("code",[s._v("stop-dfs.sh")]),s._v("：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/Eem7UC2VlsAqkao.png",alt:"iShot2020-05-20下午08.58.25.png"}})]),s._v(" "),t("p",[s._v("然后，分别添加 YARN 用户。")]),s._v(" "),t("p",[s._v("首先编辑 "),t("code",[s._v("start-yarn.sh")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/sbin/start-yarn.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("YARN_RESOURCEMANAGER_USER=root\nYARN_NODEMANAGER_USER=root\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("然后编辑 "),t("code",[s._v("stop-yarn.sh")]),s._v(" 添加同样的内容：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hadoop-3.2.1/sbin/stop-yarn.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("添加完成后保存退出。")]),s._v(" "),t("p",[s._v("两个文件内容如下：")]),s._v(" "),t("p",[t("code",[s._v("start-yarn.sh")]),s._v("：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/fI5yGuc2BWMNJo3.png",alt:"iShot2020-05-20下午09.00.09.png"}})]),s._v(" "),t("p",[t("code",[s._v("stop-yarn.sh")]),s._v("：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/RgMWHsDzNV3bTIq.png",alt:"iShot2020-05-20下午09.00.59.png"}})]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("修改这四个文件的时候，注意不要将内容添加到执行函数中间或者 EOF 后面，按照我的截图位置添加是不会出现问题的。")])]),s._v(" "),t("p",[s._v("经过这些配置过后，"),t("strong",[s._v("Hadoop")]),s._v(" 已经配置完成了。")]),s._v(" "),t("h2",{attrs:{id:"创建模板镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建模板镜像"}},[s._v("#")]),s._v(" 创建模板镜像")]),s._v(" "),t("p",[s._v("经过一系列繁琐的配置，终于配置成功了 "),t("strong",[s._v("Hadoop")]),s._v("，接下来，将这个容器的导出本地镜像，这样做的好处是，这个镜像内包含了已经配置完毕的 "),t("strong",[s._v("Hadoop")]),s._v("，只需要将该镜像拷贝三份即可产生一个 "),t("strong",[s._v("Hadoop")]),s._v(" 集群。")]),s._v(" "),t("p",[s._v("首先使用 "),t("code",[s._v("exit")]),s._v(" 指令退出容器。")]),s._v(" "),t("p",[s._v("然后查看当前的所有容器：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/YEHUcKl8nJtNM62.png",alt:"iShot2020-05-20下午09.03.32.png"}})]),s._v(" "),t("p",[s._v("可以看到，现在容器是停止状态的。")]),s._v(" "),t("p",[s._v("接下来，将这个容器提交为本地镜像，使用 "),t("code",[s._v("docker commit")]),s._v(" 指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker commit -m "Hadoop Template" -a "HydroCarbon" hadoop-template hadoop:v1')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("即可将容器 "),t("code",[s._v("hadoop-template")]),s._v(" 提交为镜像 "),t("code",[s._v("hadoop:v1")]),s._v("。并且添加作者为 "),t("code",[s._v("HydroCarbon")]),s._v("，提交信息为 "),t("code",[s._v("Hadoop Template")]),s._v("。这块的语法和 git 指令比较相似。")]),s._v(" "),t("p",[s._v("耐心等待镜像打包，打包完成后，执行指令查看本地镜像：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/CMOKRb4GnHyA6hx.png",alt:"iShot2020-05-20下午09.06.30.png"}})]),s._v(" "),t("p",[s._v("可以看到本地已经生成这个镜像。")]),s._v(" "),t("h2",{attrs:{id:"创建-hadoop-节点容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建-hadoop-节点容器"}},[s._v("#")]),s._v(" 创建 Hadoop 节点容器")]),s._v(" "),t("p",[s._v("成功生成本地镜像之后，可以使用这个已经部署好 "),t("strong",[s._v("Hadoop")]),s._v(" 的镜像来创建容器作为节点了。")]),s._v(" "),t("p",[s._v("首先创建两个 datanode，依次使用指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -itd --network hadoop-net -h "datanode1" --name "datanode1" hadoop:v1')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -itd --network hadoop-net -h "datanode2" --name "datanode2" hadoop:v1')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这样就启动后两个容器（节点），并且设置了各个容器（节点）的 host 和 name，然后将它们挂载到同一个网络上。这样它们之间就会产生互联。")]),s._v(" "),t("p",[s._v("最后，再创建一个容器作为主节点：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -it --network hadoop-net -h "namenode" --name "namenode" -p 9870:9870 -p 8088:8088 -p 9000:9000 -p 10020:10020 -p 19888:19888 hadoop:v1')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("创建主节点时，将需要的端口全部映射到了宿主机器上。这样可以直接通过宿主机 localhost 访问 Web 页面等。")]),s._v(" "),t("p",[s._v("三个节点全部创建完成后，Shell 会进入主节点的 bash，这时可以直接继续进行下面的操作。")]),s._v(" "),t("h2",{attrs:{id:"启动集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动集群"}},[s._v("#")]),s._v(" 启动集群")]),s._v(" "),t("p",[s._v("所有的容器已经全部创建完毕了，这时，可以启动集群了。")]),s._v(" "),t("p",[s._v("上一步中，默认最后已经进入了主节点的 shell，先来格式化一下 HDFS，使用指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs namenode -format")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("等待格式化完成，如果成功，会有这样一条提示：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/wtMj3Ee7HuWzOAP.png",alt:"iShot2020-05-20下午09.10.54.png"}})]),s._v(" "),t("p",[s._v("这就说明以及成功格式化了 HDFS。")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),t("p",[s._v("需要注意，格式化 HDFS 分区只需要执行一次，如果多次执行，可能会产生问题。")])]),s._v(" "),t("p",[s._v("现在，可以启动集群了，依次使用指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start-dfs.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start-yarn.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("启动完毕，会看到如下结果：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/EkvnRXbiGZQTfAp.png",alt:"iShot2020-05-20下午09.12.46.png"}})]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("上述 Warning 信息仅会第一次启动 Hadoop 时显示，这时在添加各节点的 hostname 并且创建相关的文件夹。")])]),s._v(" "),t("p",[s._v("然后执行 "),t("code",[s._v("jps")]),s._v(" 指令查看正在运行的资源进程 pid，可以看到：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/CLqhz8gxO1lQeNo.png",alt:"iShot2020-05-20下午09.14.44.png"}})]),s._v(" "),t("p",[s._v("说明资源已经全部成功运行。")]),s._v(" "),t("p",[s._v("具体查看每个服务器的运行状况可以使用：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs dfsadmin -report")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("来查看，如果正常运行会得到各个进程的详细信息。")]),s._v(" "),t("p",[s._v("到这里已经成功的启动了 "),t("strong",[s._v("Hadoop")]),s._v("。")]),s._v(" "),t("p",[s._v("因为之前创建主节点容器的时候映射了端口到宿主机器，所以可以使用浏览器打开 "),t("a",{attrs:{href:"http://localhost:9870",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:9870"),t("OutboundLink")],1),s._v(" 可以看到：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/Tq1FNUfHy2OKpCb.png",alt:"iShot2020-05-20下午09.17.26.png"}})]),s._v(" "),t("p",[s._v("点击导航栏选项卡的 Datanodes 选项，可以查看所有节点的运行状态。")]),s._v(" "),t("p",[s._v("然后打开 "),t("a",{attrs:{href:"http://localhost:8088",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8088"),t("OutboundLink")],1),s._v(" 可以看到：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/20/SlEzI84MHxZvntD.png",alt:"iShot2020-05-20下午09.18.54.png"}})]),s._v(" "),t("p",[s._v("点击左侧 Nodes 选项，也可以看到三个节点的情况。")]),s._v(" "),t("p",[s._v("到这里，就已经成功运行了 "),t("strong",[s._v("Hadoop")]),s._v(" 完全分布式集群。")]),s._v(" "),t("h2",{attrs:{id:"关闭集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭集群"}},[s._v("#")]),s._v(" 关闭集群")]),s._v(" "),t("p",[s._v("关闭集群只需要依次执行指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stop-dfs.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stop-yarn.sh")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("即可关闭 "),t("strong",[s._v("Hadoop")]),s._v(" 服务。")]),s._v(" "),t("p",[s._v("关于如何安装 "),t("strong",[s._v("Hadoop")]),s._v(" 就写这么多，可以自行尝试运行 "),t("strong",[s._v("Hadoop")]),s._v(" 内置的实例。")])])}),[],!1,null,null,null);a.default=n.exports}}]);