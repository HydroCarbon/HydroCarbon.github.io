(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{602:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"hadoop-functions-sh-错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hadoop-functions-sh-错误"}},[s._v("#")]),s._v(" hadoop-functions.sh 错误")]),s._v(" "),t("p",[s._v("按照本站的文章安装完 Hadoop 和 HBase 后，启动 HBase 的时候，会出现以下错误：")]),s._v(" "),t("blockquote",[t("p",[s._v("/usr/local/hadoop-3.2.1/libexec/hadoop-functions.sh: line 2401: HADOOP_ORG.APACHE.HADOOP.CONF.CONFIGURATION_USER: bad substitution")]),s._v(" "),t("p",[s._v("/usr/local/hadoop-3.2.1/libexec/hadoop-functions.sh: line 2366: HADOOP_ORG.APACHE.HADOOP.CONF.CONFIGURATION_USER: bad substitution")]),s._v(" "),t("p",[s._v("/usr/local/hadoop-3.2.1/libexec/hadoop-functions.sh: line 2461: HADOOP_ORG.APACHE.HADOOP.CONF.CONFIGURATION_OPTS: bad substitution")])]),s._v(" "),t("p",[s._v("关于这个问题，是这个脚本的 Bug，这在 Hadoop 的 Issues 里面有人已经提到，具体链接地址是 "),t("a",{attrs:{href:"https://issues.apache.org/jira/browse/HADOOP-16167",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://issues.apache.org/jira/browse/HADOOP-16167"),t("OutboundLink")],1),s._v("，文章中的提示 line 可能和本地启动时的不也一样，因为链接中的文章是基于 Hadoop 3.2.0 安装的，所以脚本可能会有少许不一致。")]),s._v(" "),t("p",[s._v("这个问题，官方已经明确表明会在 3.3.0 版本中解决，并且已经把改 Issue 标记为 "),t("code",[s._v("Major")]),s._v(" 了。至于在其他版本中如何解决，下面的评论也有大佬说明了。")]),s._v(" "),t("p",[s._v("这里使用评论中看起来最合理的方法来解决这个问题。")]),s._v(" "),t("h2",{attrs:{id:"复制文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#复制文件"}},[s._v("#")]),s._v(" 复制文件")]),s._v(" "),t("p",[s._v("首先需要对这个问题进行定位，Shell 中已经明确指出了这个问题所在的文件以及 line。那么只需要编辑这个文件进行修改即可。")]),s._v(" "),t("p",[s._v("为了让修改达到全部生效的目的，还是一样的，在 Hadoop 模板容器中修改，也就是 "),t("code",[s._v("hadoop-template")]),s._v(" 容器中修改。")]),s._v(" "),t("p",[s._v("但是由于这个文件过长，如果直接在 Shell 中使用 Nano 或者其他的编辑器来编辑，会十分的难找。这里可以使用 Docker 提供的拷贝容器文件到宿主机器的功能来将文件拷贝到本地，然后使用编辑器快速修改后再覆盖回去。")]),s._v(" "),t("p",[s._v("这里就不需要启动容器了，直接使用 "),t("code",[s._v("docker cp")]),s._v(" 指令来复制：")]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),t("p",[s._v("在使用下面的指令时，将指令中的 "),t("code",[s._v("/Users/hydrocarbon/Desktop")]),s._v(" 改为你自己想要拷贝到的本地路径。否则会提示路径不存在。")]),s._v(" "),t("p",[s._v("下面的命令仅适用于我！请不要无脑复制！")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker cp hadoop-template:/usr/lib/haddop-3.2.1/libexec/hadoop-functions.sh /Users/hydrocarbon/Desktop")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这样，就将文件拷贝到了本地的桌面。")]),s._v(" "),t("h2",{attrs:{id:"修改文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改文件"}},[s._v("#")]),s._v(" 修改文件")]),s._v(" "),t("p",[s._v("现在，可以修改文件了，使用本地的编辑器打开文件，这里推荐 Sublime Text 编辑器。")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),t("p",[s._v("为了避免修改出错，建议从后往前改，即先修改行数较大的再修改行数较小的，这样可以避免修改前面的文件后无法找到后面的位置。")])]),s._v(" "),t("p",[s._v("按照上面的链接中大佬的提示，仅需要将以下代码段添加到相应的位置即可，代码：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# don't process raw methods")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${command}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("~ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("分别复制到 "),t("strong",[s._v("2427 行、2389 行、2364 行")]),s._v("。")]),s._v(" "),t("p",[s._v("再次提醒，请从后往前更改。")]),s._v(" "),t("p",[s._v("更改完成后，三处位置如图：")]),s._v(" "),t("p",[s._v("2427 行：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/21/ZSwEPY6qKBefnAy.png",alt:"iShot2020-05-21下午09.17.53.png"}})]),s._v(" "),t("p",[s._v("2389 行：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/21/XKTAMUduc49pFtS.png",alt:"iShot2020-05-21下午09.18.18.png"}})]),s._v(" "),t("p",[s._v("2364 行：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://i.loli.net/2020/05/21/5gV3lcBYaroEe7x.png",alt:"iShot2020-05-21下午09.18.49.png"}})]),s._v(" "),t("p",[s._v("图中行号前绿色竖线的位置即为修改的行数，修改完成后，保存文件。")]),s._v(" "),t("h2",{attrs:{id:"上传文件至容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传文件至容器"}},[s._v("#")]),s._v(" 上传文件至容器")]),s._v(" "),t("p",[s._v("文件修改后，首先进入容器删除原文件，依次使用指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker start hadoop-template")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it hadoop-template bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm /usr/local/hadoop-3.2.1/libexec/hadoop-functions.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("即可删除文件，并退出容器。")]),s._v(" "),t("p",[s._v("退出容器后，使用指令：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker cp /Users/hydrocarbon/Desktop/hadoop-functions.sh hadoop-template:/usr/lib/haddop-3.2.1/libexec/")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),t("p",[s._v("同样的，上述指令需要将 "),t("code",[s._v("/Users/hydrocarbon/Desktop/hadoop-functions.sh")]),s._v(" 改为你修改后的文件的路径。即本地 "),t("code",[s._v("hadoop-functions.sh")]),s._v(" 文件的路径。")])]),s._v(" "),t("p",[s._v("执行完指令后，重新创建节点容器，启动 Hadoop 和 HBase 就不会出现问题了。")]),s._v(" "),t("h2",{attrs:{id:"另一个-bug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#另一个-bug"}},[s._v("#")]),s._v(" 另一个 Bug")]),s._v(" "),t("p",[s._v("关于另一个 Bug 的问题已经在 HBase 安装笔记中更新了笔记，添加 "),t("code",[s._v("hbase.unsafe.stream.capability.enforce")]),s._v(" 配置为 "),t("code",[s._v("false")]),s._v(" 解决了。")]),s._v(" "),t("p",[s._v("如果你之前没有添加，并且启动 HBase 后，过了一会发现 HMaster 进程会死掉，那么请去那一篇中查看并添加配置即可解决。")]),s._v(" "),t("h2",{attrs:{id:"题外话"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#题外话"}},[s._v("#")]),s._v(" 题外话")]),s._v(" "),t("p",[s._v("实际上在安装 Hadoop 和 HBase 的时候，可能会遇到很多的问题，这些问题都没有固定的解决方案，因为 Apache 维护了很多很多的开源项目，所以修复的速度不一定会那么快，遇到问题的时候，自己多利用搜索引擎查阅资料或者去 Apache 或者 GitHub 的 issue 里面，都是可以解决掉很多问题的。")]),s._v(" "),t("p",[s._v("当然，也欢迎你来和我一起讨论。互相学习，互相进步，这才是开源的精神所在。")])])}),[],!1,null,null,null);a.default=n.exports}}]);