(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{625:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"使用-idea-搭建-jdk-源码阅读修改的环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-idea-搭建-jdk-源码阅读修改的环境"}},[t._v("#")]),t._v(" 使用 IDEA 搭建 JDK 源码阅读修改的环境")]),t._v(" "),a("blockquote",[a("p",[t._v("源码面前，了无秘密。")])]),t._v(" "),a("p",[t._v("学习 Java 时，阅读 JDK 源码是非常重要的，并且要对自己的理解做些笔记，最好可以直接在 JDK 源码中直接记下笔记，这可以让我们再次学习的时候，直接查看到之前所记录的笔记，对学习是十分有帮助的。因为平常使用的 Java 开发环境是 IDEA，所以打算基于 IDEA 搭建一个自己的源码阅读并修改的环境。")]),t._v(" "),a("p",[t._v("话不多说，开始吧！")]),t._v(" "),a("h2",{attrs:{id:"下载-jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载-jdk"}},[t._v("#")]),t._v(" 下载 JDK")]),t._v(" "),a("p",[t._v("当然，一般都会已经安装了 JDK 环境，但是为了提供一份单独供学习的 JDK，我选择再下载一份 JDK 的压缩包，来单独使用 IDEA 导入（不配置系统环境变量），作为学习的 JDK。另外我选择的是最新的 JDK 的 LTS 版本，也就是 JDK-11。")]),t._v(" "),a("p",[t._v("Oracle JDK 11 下载地址："),a("a",{attrs:{href:"https://www.oracle.com/java/technologies/javase-jdk11-downloads.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.oracle.com/java/technologies/javase-jdk11-downloads.html"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("当然，你也可以选择使用开源的 Open JDK 11，下载地址是："),a("a",{attrs:{href:"https://jdk.java.net/java-se-ri/11",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://jdk.java.net/java-se-ri/11"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("这里选择下载的是名称中包含 "),a("code",[t._v("Compressed Archive")]),t._v(" 的版本。")]),t._v(" "),a("p",[t._v("下载完成后，将 JDK 解压至任意合适的目录即可。")]),t._v(" "),a("p",[t._v("比如我就直接将它解压到了我用户所在的根目录。")]),t._v(" "),a("h2",{attrs:{id:"配置-idea-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-idea-环境"}},[t._v("#")]),t._v(" 配置 IDEA 环境")]),t._v(" "),a("p",[t._v("打开 IDEA，创建一个 Java 项目，进入下图时，更改 JDK 配置：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/mucq5Ez2a3gvR4M.png",alt:"iShot2020-05-26上午10.17.05.png"}})]),t._v(" "),a("p",[t._v("按照上图所示步骤，点击 "),a("code",[t._v("Add JDK...")]),t._v(" 后，添加刚才解压的 JDK。然后即可完成创建项目，并使用的是刚才自己下载的 JDK。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",[t._v("选择 JDK 时，直接选择 JDK 根目录即可。")]),t._v(" "),a("p",[t._v("在 macOS 中，需要选择 JDK 下 "),a("code",[t._v("Contents/Home")]),t._v(" 路径即可。")])]),t._v(" "),a("p",[t._v("后续几个创建项目的步骤（项目名等）直接按照个人喜好来选择即可。")]),t._v(" "),a("p",[t._v("项目创建完成后就打开了 IDEA 工作区。这时，新建的项目是这样的：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/ulmjDbzErgcaihF.png",alt:"iShot2020-05-26上午10.21.59.png"}})]),t._v(" "),a("p",[t._v("此时新建一个包，然后新建一个类，写上想要查看的源码，比如说学习 "),a("code",[t._v("ArrayList")]),t._v(" 类，可以书写一个这样的类：")]),t._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" integerList "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        integerList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("p",[t._v("在创建对象这里打上断点，如图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/XuFKcZRygBPLmSi.png",alt:"iShot2020-05-26上午11.36.15.png"}})]),t._v(" "),a("p",[t._v("这时调试程序，点击 "),a("code",[t._v("step")]),t._v(" 执行，发现程序并不会跳转至 JDK 源码，而是直接运行到下一条我们自己书写的语句就结束了，这样我们并不能看见整个 JDK 对 "),a("code",[t._v("ArrayList")]),t._v(" 的初始化以及 "),a("code",[t._v("add()")]),t._v(" 的具体实现。")]),t._v(" "),a("h3",{attrs:{id:"调试时查看-jdk-源码执行步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#调试时查看-jdk-源码执行步骤"}},[t._v("#")]),t._v(" 调试时查看 JDK 源码执行步骤")]),t._v(" "),a("p",[t._v("想要看到 JDK 源码到底是如何工作的，也就是 "),a("code",[t._v("step")]),t._v(" 进入 JDK 源码，需要额外打开 IDEA 的一项设置。")]),t._v(" "),a("p",[t._v("首先进入 IDEA 的设置，在 Windows 和 Linux 上是打开 IDEA 的 "),a("code",[t._v("Settings")]),t._v(" 选项，macOS 上是打开 "),a("code",[t._v("Preferences")]),t._v(" 选项。")]),t._v(" "),a("p",[t._v("然后找到如图的位置，关闭这个勾（图中标记 4 处）：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/klSZYgDI5qVwNnO.png",alt:"iShot2020-05-26上午11.43.02.png"}})]),t._v(" "),a("p",[t._v("然后保存设置，关闭设置面板即可。这时再次使用 "),a("code",[t._v("step")]),t._v(" 调试，可以看到会进入 JDK 源码了，这样，我们就可以清楚地了解到 JDK 是如何处理我们执行的每一步操作的。阅读源码可以学习到很多。")]),t._v(" "),a("h3",{attrs:{id:"修改-sourcepath-以修改-jdk-源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改-sourcepath-以修改-jdk-源码"}},[t._v("#")]),t._v(" 修改 SourcePATH 以修改 JDK 源码")]),t._v(" "),a("p",[t._v("虽然已经可以看到每一步中 JDK 是如何执行操作的，但是我们并不能在源码中添加注释，如果将源码复制或者截图再注释，会非常的麻烦。这时可以替换 Sourcepath 为额外的自己解压的版本，然后就可以直接修改 JDK 源码了。")]),t._v(" "),a("p",[t._v("首先进入解压的 JDK 的路径，如图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/tWfPJHTcbyBvIi2.png",alt:"iShot2020-05-26上午11.50.34.png"}})]),t._v(" "),a("p",[t._v("进入 "),a("code",[t._v("lib")]),t._v(" 路径，里面有一个文件，文件名为 "),a("code",[t._v("src.zip")]),t._v("，这就是 JDK 的源码文件，如图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/ltokqXMVWBzQ9mp.png",alt:"iShot2020-05-26上午11.52.50.png"}})]),t._v(" "),a("p",[t._v("将这个文件复制到另一个合适的路径，这个路径将是我们可以修改的 JDK 的路径，比如我将其复制到桌面，并解压。得到一个内含很多文件的名为 "),a("code",[t._v("src")]),t._v(" 的目录。")]),t._v(" "),a("p",[t._v("解压完成后，去 IDEA 中，打开 "),a("code",[t._v("Project Structure")]),t._v(" 选项（运行按钮的右边那个像文件夹一样的按钮，或者从 File -> Project Structure 打开），打开后，来到如图位置：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/aNHpOq2tbD9Yc4S.png",alt:"iShot2020-05-26上午11.58.31.png"}})]),t._v(" "),a("p",[t._v("将 "),a("code",[t._v("Sourcepath")]),t._v(" 中的所有路径删除。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("全选后点击下面的 "),a("code",[t._v("-")]),t._v("，注意，删除的是 "),a("code",[t._v("Sourcepath")]),t._v(" 下的所有东西，不是其他的。")])]),t._v(" "),a("p",[t._v("删除后，点击 "),a("code",[t._v("+")]),t._v(" ，添加刚才解压至桌面的 "),a("code",[t._v("src")]),t._v(" 文件夹。添加完成后，如图：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/U3NRgA7cpnYI8Bs.png",alt:"iShot2020-05-26下午12.01.56.png"}})]),t._v(" "),a("p",[t._v("之后点击保存关闭窗口。")]),t._v(" "),a("h2",{attrs:{id:"查看-修改源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看-修改源码"}},[t._v("#")]),t._v(" 查看 & 修改源码")]),t._v(" "),a("p",[t._v("这时，再次运行 Debug，还是设置 step 运行，可以看到已经进入了 JDK 源码，并且此时源码可以被修改了。")]),t._v(" "),a("p",[t._v("第一次修改源码，会有如下提示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2020/05/26/KXuRg5DLAzJldwI.png",alt:"iShot2020-05-26下午12.05.14.png"}})]),t._v(" "),a("p",[t._v("直接点击红色框的选项后点击 "),a("code",[t._v("OK")]),t._v(" 即可，以后每次修改源码（当前项目）都不会有提示了。")]),t._v(" "),a("h2",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[t._v("#")]),t._v(" 注意")]),t._v(" "),a("p",[t._v("在 JDK 源码中添加注释的时候，不要修改行数，否则会导致跳转到的行数不正确，最好是在源码后面添加注释。")])])}),[],!1,null,null,null);s.default=n.exports}}]);