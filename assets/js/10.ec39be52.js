(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{604:function(s,a,e){"use strict";e.r(a);var t=e(14),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),e("h2",{attrs:{id:"概述-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概述-2"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),e("blockquote",[e("p",[e("strong",[s._v("HBase")]),s._v(" 是一个开源的非关系型分布式数据库（NoSQL），它参考了谷歌的 BigTable 建模，实现的编程语言为 Java。它是 Apache 软件基金会的 Hadoop 项目的一部分，运行于 HDFS 文件系统之上，为 Hadoop 提供类似于 BigTable 规模的服务。因此，它可以对稀疏文件提供极高的容错率。"),e("strong",[s._v("HBase")]),s._v(" 在列上实现了 BigTable 论文提到的压缩算法、内存操作和布隆过滤器。"),e("strong",[s._v("HBase")]),s._v(" 的表能够作为 MapReduce 任务的输入和输出，可以通过 Java API 来访问数据，也可以通过 REST、Avro 或者 Thrift 的 API 来访问。虽然最近性能有了显著的提升，"),e("strong",[s._v("HBase")]),s._v(" 还不能直接取代 SQL 数据库。如今，它已经应用于多个数据驱动型网站，包括 Facebook 的消息平台。在 Eric Brewer 的 CAP 理论中，"),e("strong",[s._v("HBase")]),s._v(" 属于 CP 类型的系统。")])]),s._v(" "),e("p",[s._v("所以在安装 "),e("strong",[s._v("HBase")]),s._v(" 之前是需要安装 Hadoop 的，关于 Hadoop 的安装，请查看 "),e("RouterLink",{attrs:{to:"/big-data/hadoop-installation-note.html"}},[s._v("安装 Hadoop")])],1),s._v(" "),e("p",[s._v("同样的，这里还是使用 Docker 来安装，并且是在之前安装好的 Hadoop 的基础上来安装的。如果之前是按照我的另一篇安装 Hadoop 的文章来操作的，那么 Docker 中应该会存在一个名为 "),e("code",[s._v("hadoop-template")]),s._v(" 的容器。接下来的安装操作，还是在这个容器中进行。")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("如果你没有这个容器，可以按照那篇文章创建一个。")])]),s._v(" "),e("p",[s._v("话不多说，开始吧。")]),s._v(" "),e("h2",{attrs:{id:"进入-hadoop-模板容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入-hadoop-模板容器"}},[s._v("#")]),s._v(" 进入 Hadoop 模板容器")]),s._v(" "),e("p",[s._v("进入容器之前，想要启动这个容器，使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker container start hadoop-template")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("容器启动后，使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it hadoop-template bash")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("进入容器，进入容器后，可以看到 Shell 已经变成了容器的 bash。接下来就可以进行安装 "),e("strong",[s._v("HBase")]),s._v(" 的操作了。")]),s._v(" "),e("h2",{attrs:{id:"下载-hbase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#下载-hbase"}},[s._v("#")]),s._v(" 下载 HBase")]),s._v(" "),e("p",[s._v("同样的，使用国内镜像站下载 "),e("strong",[s._v("HBase")]),s._v("，使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd && wget https://mirrors.tuna.tsinghua.edu.cn/apache/hbase/2.2.4/hbase-2.2.4-bin.tar.gz")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可进入 root 目录并且下载 "),e("strong",[s._v("HBase")]),s._v(" 文件，下载可能比较慢，耐心等待进度条走完即可。")]),s._v(" "),e("h2",{attrs:{id:"解压-hbase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压-hbase"}},[s._v("#")]),s._v(" 解压 HBase")]),s._v(" "),e("p",[s._v("下载完成后，首先对文件进行解压操作，还是将文件解压至 "),e("code",[s._v("/usr/local")]),s._v(" 路径下，使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar -zxvf hbase-2.2.4-bin.tar.gz -C /usr/local/")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("等待解压完成，可以选择删除源文件，使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rm hbase-2.2.4-bin.tar.gz")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可删除源文件，节省硬盘空间。")]),s._v(" "),e("h2",{attrs:{id:"添加-hbase-环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#添加-hbase-环境变量"}},[s._v("#")]),s._v(" 添加 HBase 环境变量")]),s._v(" "),e("p",[s._v("和 Hadoop 安装一样，为了让系统内全局可以使用 "),e("strong",[s._v("HBase")]),s._v("，可以将 "),e("strong",[s._v("HBase")]),s._v(" 添加到系统环境配置中。")]),s._v(" "),e("p",[s._v("使用 Nano 编辑器打开 "),e("code",[s._v("/etc/profile")]),s._v(" 文件：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /etc/profile")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("添加：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# HBase\nexport HBASE_HOME=/usr/local/hbase-2.2.4\nexport PATH=$HBASE_HOME/bin:$PATH\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("到文件末尾，加上之前添加的 Hadoop 和 Java 的环境变量，现在这个文件结尾如图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/20/REPougNr7k1Hasy.png",alt:"iShot2020-05-20下午10.19.33.png"}})]),s._v(" "),e("p",[s._v("添加完成后，保存文件并退出 Nano 编辑器。")]),s._v(" "),e("p",[s._v("退出后，执行 "),e("code",[s._v("source ~/.bashrc")]),s._v(" 重新读取环境变量配置文件，使得 "),e("strong",[s._v("HBase")]),s._v(" 的环境变量生效。")]),s._v(" "),e("h2",{attrs:{id:"修改-hbase-环境文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-hbase-环境文件"}},[s._v("#")]),s._v(" 修改 HBase 环境文件")]),s._v(" "),e("p",[s._v("接下来，修改 "),e("strong",[s._v("HBase")]),s._v(" 的环境配置文件。")]),s._v(" "),e("p",[s._v("使用编辑器打开 "),e("strong",[s._v("HBase")]),s._v(" 环境配置文件 "),e("code",[s._v("/usr/local/hbase-2.2.4/conf/hbase-env.sh")]),s._v(" 文件：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hbase-2.2.4/conf/hbase-env.sh")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在最后添加：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("为 "),e("strong",[s._v("HBase")]),s._v(" 指定 Java 的路径，完成后如图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/20/H5XhNiuZznKg3JR.png",alt:"iShot2020-05-20下午10.26.47.png"}})]),s._v(" "),e("p",[s._v("保存并退出编辑器。")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("这里使用的是 HBase 自带的 ZooKeeper，所以不需要配置 "),e("code",[s._v("HBASE_MANAGES_ZK")]),s._v("。")]),s._v(" "),e("p",[s._v("如果是额外安装的 ZooKeeper，请把这个参数设置为 "),e("code",[s._v("false")]),s._v("。")])]),s._v(" "),e("h2",{attrs:{id:"修改-hbase-配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-hbase-配置文件"}},[s._v("#")]),s._v(" 修改 HBase 配置文件")]),s._v(" "),e("p",[e("strong",[s._v("HBase")]),s._v(" 的配置文件为 "),e("code",[s._v("/usr/local/hbase-2.2.4/conf/hbase-site.xml")]),s._v("，使用编辑器打开它：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hbase-2.2.4/conf/hbase-site.xml")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("添加：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("<configuration>\n    <property>\n        <name>hbase.zookeeper.quorum</name>\n        <value>namenode,datanode1,datanode2</value>\n        <description>The directory shared by RegionServers.</description>\n    </property>\n    <property>\n        <name>hbase.zookeeper.property.dataDir</name>\n        <value>/root/hadoop/zkData</value>\n        <description>\n            Property from ZooKeeper config zoo.cfg.\n            The directory where the snapshot is stored.\n        </description>\n    </property>\n    <property>\n        <name>hbase.rootdir</name>\n        <value>hdfs://namenode:9000/hbase</value>\n        <description>The directory shared by RegionServers.</description>\n    </property>\n    <property>\n        <name>hbase.cluster.distributed</name>\n        <value>true</value>\n        <description>\n            The mode the cluster will be in. Possible values are\n            false: standalone and pseudo-distributed setups with managed ZooKeeper\n            true: fully-distributed with unmanaged ZooKeeper Quorum (see hbase-env.sh)\n        </description>\n    </property>\n    <property>\n        <name>hbase.unsafe.stream.capability.enforce</name>\n        <value>false</value>\n    </property>\n</configuration>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br")])]),e("p",[s._v("添加完成后如图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/21/CvTH3WPuqcVX4Iw.png",alt:"iShot2020-05-21下午08.25.01.png"}})]),s._v(" "),e("p",[s._v("此配置是从 "),e("strong",[s._v("HBase")]),s._v(" 官网的文档的模板配置得到的，具体每项参数的意义可以查看 description 中的内容。")]),s._v(" "),e("p",[s._v("配置模板地址为 "),e("a",{attrs:{href:"https://hbase.apache.org/book.html#example_config",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hbase.apache.org/book.html#example_config"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("最后一项配置 "),e("code",[s._v("hbase.unsafe.stream.capability.enforce")]),s._v(" 设置为 "),e("code",[s._v("false")]),s._v(" 是因为 2.x 版本的 "),e("strong",[s._v("HBase")]),s._v(" 和 3.x 版本的 Hadoop 并不是完全匹配的，貌似 Apache 官方并没有及时的更新相应的 "),e("strong",[s._v("HBase")]),s._v(" 版本，所以只能将这一项设置为 "),e("code",[s._v("false")]),s._v(" 来绕过使用这个依赖以免使得 HMaster 无法启动。")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[s._v("当然，你也可以选择其他版本的 Hadoop 和 HBase 来安装，或者自己编译安装 Hadoop 和 HBase 来修复这一项 Bug。否则，请添加上这一项配置。")]),s._v(" "),e("p",[s._v("另外，如果不添加这一项配置，你的 HBase 启动日志应该会出现如下内容：")]),s._v(" "),e("blockquote",[e("p",[s._v("master.HMaster: Failed to become active master\njava.lang.IllegalStateException: The procedure WAL relies on the ability to hsync for proper operation during component failures, but the underlying filesystem does not support doing so. Please check the config value of 'hbase.procedure.store.wal.use.hsync' to set the desired level of robustness and ensure the config value of 'hbase.wal.dir' points to a FileSystem mount that can provide it.")])])]),s._v(" "),e("p",[s._v("在配置中配置了 "),e("code",[s._v("hbase.zookeeper.property.dataDir")]),s._v(" 为 "),e("code",[s._v("/root/hadoop/zkData")]),s._v("，当前，这个目录并不存在，为了避免出错，手动创建这个目录：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir -p /root/hadoop/zkData")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可创建。")]),s._v(" "),e("h2",{attrs:{id:"修改-regionservers-文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改-regionservers-文件"}},[s._v("#")]),s._v(" 修改 regionservers 文件")]),s._v(" "),e("p",[s._v("这个文件的作用相当于 Hadoop 中的 "),e("code",[s._v("workers")]),s._v(" 文件，使用编辑器打开它：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# nano /usr/local/hbase-2.2.4/conf/regionservers")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将其中的内容修改为：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("namenode\ndatanode1\ndatanode2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("修改完成后如图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/20/obJ4FRCtmSnf9cA.png",alt:"iShot2020-05-20下午10.50.46.png"}})]),s._v(" "),e("p",[s._v("确认无误后保存退出，到此就完成了对 "),e("strong",[s._v("HBase")]),s._v(" 的配置。")]),s._v(" "),e("h2",{attrs:{id:"提交包含-hbase-的镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提交包含-hbase-的镜像"}},[s._v("#")]),s._v(" 提交包含 HBase 的镜像")]),s._v(" "),e("p",[s._v("同样的，使用 "),e("code",[s._v("docker commit")]),s._v(" 指令来提交包含 "),e("strong",[s._v("HBase")]),s._v(" 的镜像，这一次，将镜像名标签改为 "),e("code",[s._v("v2")]),s._v("，并添加提交信息。")]),s._v(" "),e("p",[s._v("在提交镜像之前，先使用 "),e("code",[s._v("exit")]),s._v(" 指令退出容器，然后使用：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker container stop hadoop-template")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("来终止容器，接下来可以提交镜像了，使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker commit -m "Hadoop Template With HBase" -a "HydroCarbon" hadoop-template hadoop:v2')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("稍作等待，即可完成提交，然后查看本地镜像，如图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/20/a71WsFHdiwlKZmx.png",alt:"iShot2020-05-20下午10.57.54.png"}})]),s._v(" "),e("p",[s._v("可以看到镜像已经成功提交。")]),s._v(" "),e("h2",{attrs:{id:"创建包含-hbase-的容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建包含-hbase-的容器"}},[s._v("#")]),s._v(" 创建包含 HBase 的容器")]),s._v(" "),e("p",[s._v("之前，已经创建了三个不包含 "),e("strong",[s._v("HBase")]),s._v(" 的容器作为 Hadoop 节点，现在，可以将那三个节点删除重新创建包含 "),e("strong",[s._v("HBase")]),s._v(" 的容器节点。")]),s._v(" "),e("p",[s._v("删除容器分别使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker container stop namenode datanode1 datanode2")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker container rm namenode datanode1 datanode2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("即可删除之前创建的三个容器，如图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/20/8MUe7yRLxFPTHuJ.png",alt:"iShot2020-05-20下午11.02.38.png"}})]),s._v(" "),e("p",[s._v("可以看到，容器已经删除。")]),s._v(" "),e("p",[s._v("接下来，可以创建容器作为新的节点了，首先创建两个 datanode，依次执行指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -itd --network hadoop-net -h "datanode1" --name "datanode1" hadoop:v2')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -itd --network hadoop-net -h "datanode2" --name "datanode2" hadoop:v2')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("即可创建两个 datanode 节点，然后执行：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -it --network hadoop-net -h "namenode" --name "namenode" -p 9870:9870 -p 8088:8088 -p 16010:16010 hadoop:v2')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这次创建主节点时，只映射了提供 WebUI 的端口。")]),s._v(" "),e("p",[s._v("此时 Shell 进入了 namenode 的 bash。")]),s._v(" "),e("h2",{attrs:{id:"启动-hbase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-hbase"}},[s._v("#")]),s._v(" 启动 HBase")]),s._v(" "),e("p",[s._v("在启动 "),e("strong",[s._v("HBase")]),s._v(" 之前，还是需要先格式化 HDFS 并启动 Hadoop 集群，依次使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hdfs namenode -format")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start-dfs.sh")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start-yarn.sh")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("等待全部启动完毕后，执行：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start-hbase.sh")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("启动 "),e("strong",[s._v("HBase")]),s._v("，成功启动后使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hbase shell")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可进入 "),e("strong",[s._v("HBase")]),s._v(" 的 Shell，退出则使用指令 "),e("code",[s._v("exit")]),s._v("。")]),s._v(" "),e("p",[s._v("全部启动完成后执行 "),e("code",[s._v("jps")]),s._v(" 指令，如图：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/21/zfiRmqe17A86HDx.png",alt:"iShot2020-05-21下午08.34.33.png"}})]),s._v(" "),e("p",[s._v("说明 "),e("strong",[s._v("HBase")]),s._v(" 在运行中。")]),s._v(" "),e("p",[s._v("另外，此时打开浏览器，访问 "),e("a",{attrs:{href:"http://localhost:16010",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:16010"),e("OutboundLink")],1),s._v("，可以看到：")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://i.loli.net/2020/05/21/E5tQnaKNqb2XHfd.png",alt:"iShot2020-05-21下午08.36.47.png"}})]),s._v(" "),e("p",[s._v("这时，"),e("strong",[s._v("HBase")]),s._v(" 的 WebUI 也已经成功启动。")]),s._v(" "),e("h2",{attrs:{id:"关闭-hbase"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭-hbase"}},[s._v("#")]),s._v(" 关闭 HBase")]),s._v(" "),e("p",[s._v("关闭 "),e("strong",[s._v("HBase")]),s._v(" 使用指令：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stop-hbase.sh")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("即可停止 "),e("strong",[s._v("HBase")]),s._v("。")]),s._v(" "),e("p",[s._v("到此，"),e("strong",[s._v("HBase")]),s._v(" 的安装以及完全完成。")])])}),[],!1,null,null,null);a.default=n.exports}}]);